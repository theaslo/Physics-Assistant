# Physics Assistant Staging Environment Configuration
# IMPORTANT: Change passwords for production deployment

# =============================================================================
# APPLICATION ENVIRONMENT
# =============================================================================
ENVIRONMENT=staging
DEBUG=true
LOG_LEVEL=debug
LOG_FORMAT=json

# =============================================================================
# DOMAIN AND SSL CONFIGURATION
# =============================================================================
DOMAIN_NAME=staging.physics-assistant.edu
ADMIN_EMAIL=admin@physics-assistant.edu
SSL_ENABLED=true
CERT_EMAIL=ssl@physics-assistant.edu
ACME_CA_SERVER=https://acme-staging-v02.api.letsencrypt.org/directory

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_PASSWORD=staging_postgres_2024!
PHYSICS_DB_PASSWORD=staging_physics_db_2024!
MONITOR_DB_PASSWORD=staging_monitor_db_2024!
NEO4J_PASSWORD=staging_neo4j_2024!
REDIS_PASSWORD=staging_redis_2024!

# Database Performance (Reduced for staging)
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=15
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
JWT_SECRET=STAGING_JWT_SECRET_32_CHARS_MINIMUM
ENCRYPTION_KEY=STAGING_ENCRYPTION_KEY_32_CHARS
SESSION_SECRET=STAGING_SESSION_SECRET_64_CHARS_LONG
CSRF_SECRET_KEY=STAGING_CSRF_SECRET_KEY

# CORS Configuration
CORS_ORIGINS=https://staging.physics-assistant.edu,https://staging-dashboard.physics-assistant.edu
CORS_ALLOW_CREDENTIALS=true

# Rate Limiting (More relaxed for testing)
API_RATE_LIMIT=200
AUTH_RATE_LIMIT=20
BURST_RATE_LIMIT=40
RATE_LIMIT_STORAGE=redis://redis:6379/1

# =============================================================================
# API SERVICES CONFIGURATION
# =============================================================================
API_HOST=0.0.0.0
DATABASE_API_PORT=8001
DASHBOARD_API_PORT=8002
PHYSICS_API_PORT=8000

# Service Timeouts
REQUEST_TIMEOUT=300
WORKER_TIMEOUT=600
WEBSOCKET_TIMEOUT=3600

# =============================================================================
# MONITORING AND ALERTING
# =============================================================================
GRAFANA_ADMIN_PASSWORD=staging_grafana_admin_2024!
PROMETHEUS_WEB_USER=prometheus
PROMETHEUS_WEB_PASSWORD=STAGING_PROMETHEUS_PASSWORD

# Alert Configuration (Slack for staging alerts)
ALERT_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/STAGING/WEBHOOK
PAGERDUTY_INTEGRATION_KEY=STAGING_PAGERDUTY_KEY
ALERT_MANAGER_EMAIL=staging-alerts@physics-assistant.edu

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
SMTP_HOST=smtp.physics-assistant.edu
SMTP_PORT=587
SMTP_USER=staging@physics-assistant.edu
SMTP_PASSWORD=STAGING_EMAIL_PASSWORD
SMTP_TLS=true
SMTP_FROM_EMAIL=staging@physics-assistant.edu

# =============================================================================
# BACKUP AND STORAGE
# =============================================================================
BACKUP_SCHEDULE=0 3 * * *  # Daily at 3 AM
BACKUP_RETENTION_DAYS=14   # Shorter retention for staging
BACKUP_ENCRYPTION_PASSWORD=STAGING_BACKUP_PASSWORD

# S3 Configuration for staging backups
S3_ACCESS_KEY_ID=STAGING_AWS_ACCESS_KEY
S3_SECRET_ACCESS_KEY=STAGING_AWS_SECRET_KEY
S3_BUCKET_NAME=physics-assistant-backups-staging
S3_REGION=us-east-1

# =============================================================================
# PERFORMANCE AND SCALING
# =============================================================================
MAX_WORKERS=2  # Reduced for staging
WORKER_MEMORY_LIMIT=1G
MAX_UPLOAD_SIZE=50MB

# Analytics Configuration
ML_MODEL_PATH=/app/models
CELERY_WORKER_CONCURRENCY=2
ANALYTICS_RETENTION_DAYS=90  # Shorter retention for staging
ANALYTICS_BATCH_SIZE=500
ML_MODEL_UPDATE_INTERVAL=48h

# =============================================================================
# OAUTH AND EXTERNAL AUTHENTICATION
# =============================================================================
GOOGLE_OAUTH_CLIENT_ID=STAGING_GOOGLE_CLIENT_ID
GOOGLE_OAUTH_CLIENT_SECRET=STAGING_GOOGLE_CLIENT_SECRET
OAUTH_REDIRECT_URI=https://staging.physics-assistant.edu/auth/callback

# =============================================================================
# LOAD BALANCING AND HIGH AVAILABILITY
# =============================================================================
NGINX_WORKER_PROCESSES=2
NGINX_WORKER_CONNECTIONS=1024
NGINX_KEEPALIVE_TIMEOUT=65
NGINX_CLIENT_MAX_BODY_SIZE=50M

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
DEPLOYMENT_STRATEGY=rolling
ROLLING_UPDATE_MAX_UNAVAILABLE=1
ROLLING_UPDATE_MAX_SURGE=1
GRACEFUL_SHUTDOWN_TIMEOUT=30s

# Container Resource Limits (Reduced for staging)
POSTGRES_MEMORY_LIMIT=1G
POSTGRES_CPU_LIMIT=0.5
REDIS_MEMORY_LIMIT=512M
REDIS_CPU_LIMIT=0.25
NEO4J_MEMORY_LIMIT=2G
NEO4J_CPU_LIMIT=1.0

# =============================================================================
# DATA PATHS AND VOLUMES
# =============================================================================
DATA_PATH=./data/staging
BACKUP_PATH=./backups/staging
LOGS_PATH=./logs/staging

# =============================================================================
# FLOWER MONITORING
# =============================================================================
FLOWER_USER=staging_admin
FLOWER_PASSWORD=staging_flower_2024!

# =============================================================================
# POSTGRES REPLICATION (Disabled for staging)
# =============================================================================
POSTGRES_REPLICATION_PASSWORD=staging_repl_2024!