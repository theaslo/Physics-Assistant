# Neo4j Configuration for Physics Assistant Knowledge Graph

# Network connector configuration
server.default_listen_address=0.0.0.0
server.default_advertised_address=localhost

# Bolt connector
server.bolt.enabled=true
server.bolt.listen_address=0.0.0.0:7687
server.bolt.advertised_address=:7687

# HTTP Connector
server.http.enabled=true
server.http.listen_address=0.0.0.0:7474
server.http.advertised_address=:7474

# HTTPS Connector (disabled for development)
server.https.enabled=false

# Database configuration
initial.dbms.default_database=neo4j
dbms.databases.default_to_read_only=false

# Memory settings
server.memory.heap.initial_size=512m
server.memory.heap.max_size=2G
server.memory.pagecache.size=1G

# Transaction settings
db.transaction.timeout=60s
db.transaction.bookmark_ready_timeout=30s

# Query settings
db.query.cache_size=10000
cypher.default_language_version=5
cypher.hints_error=true
cypher.lenient_create_relationship=false

# Logging configuration
server.logs.user.rotation.keep_number=5
server.logs.user.rotation.size=20M
server.logs.gc.enabled=true
server.logs.gc.options=-Xloggc:{LOG_PATH}/gc.log -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=20m
server.logs.debug.enabled=true
server.logs.debug.level=INFO

# Security configuration
dbms.security.auth_enabled=true
dbms.security.procedures.unrestricted=jwt.*,apoc.*,gds.*
dbms.security.procedures.allowlist=jwt.*,apoc.*,gds.*

# APOC configuration
apoc.export.file.enabled=true
apoc.import.file.enabled=true
apoc.import.file.use_neo4j_config=true

# Graph Data Science configuration
gds.enterprise.license_file=

# Metrics and monitoring
server.metrics.enabled=true
server.metrics.jmx.enabled=true
server.metrics.prometheus.enabled=true
server.metrics.prometheus.endpoint=localhost:2004

# Backup configuration
dbms.backup.enabled=true
dbms.backup.listen_address=0.0.0.0:6362

# Performance settings
dbms.query_cache_size=100
dbms.query_cache.keep_cardinality=true
db.index_sampling.background_enabled=true
db.index_sampling.sample_size_limit=1000000

# Connection pool settings
server.bolt.connection_keep_alive=60s
server.bolt.connection_keep_alive_type=user_configured

# File locations
server.directories.data=/data
server.directories.logs=/logs
server.directories.import=/import
server.directories.plugins=/var/lib/neo4j/plugins